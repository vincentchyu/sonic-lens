# AI 分析结果分享图片特性清单

## 日期

2026-02-19

## 摘要

实现 AI 分析结果的图片分享功能，允许用户将生成的歌词解析等洞察生成美观的图片卡片用于社交分享，并增加了 AI 模型的流式输出选择。

## 特性范围

1. **前端 UI 更新**: 在 `templates/dashboard.html` 中增加了分享图片和重新分析的交互按钮。
2. **分享卡片渲染**: 增加了隐藏的 `shareInsightContainer` 容器用于绘制分享卡片的 DOM 结构，包含渐变背景、歌曲元信息和分析结果内容。
3. **模型选择与流式展示**: 改进了 AI 分析模态框的界面，允许用户选择分析模型（如 Ollama）并选择是否启用流式输出，同时提供了点赞/点踩的具体交互绑定。

## 功能描述

- 用户可以在查看当前的 AI 分析结果（如音眸模块）时，点击“分享图片”按钮。
- 系统会在前端隐藏容器中构建带有“音眸轨迹”署名和歌曲信息的精美版式，再将其导出为图片，方便用户转发。
- 在“重新分析”时，用户能够通过一个独立的弹窗，指定使用本地 `ollama` 模型进行解析，并控制是否用 SSE 流式接收结果。

## 实现要点

- 利用前端 `shareInsightContainer` 结合 CSS 的 `linear-gradient` 与 `backdrop-filter` 实现了类似玻璃拟态的精美高光效果。
- 将操作区封装为一个并行的 flex 布局栏，包含“重新分析”、“分享图片”以及反馈（赞/踩）。
- 更新了 AI 洞察框（`aiInsightModal`），在用户选中歌曲详情的不同分析 Tab 时能够精确同步当前的 insight 供后续生成图片或者操作点赞点踩。
